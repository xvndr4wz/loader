<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>File Explorer GitHub</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body { background:#0f172a; color:#f8fafc; font-family:sans-serif; padding:20px; }
    h1 { background:linear-gradient(to right,#4cc9f0,#4361ee); -webkit-background-clip:text; color:transparent; font-size:2rem; }
    .search-box { display:flex; gap:10px; margin:20px 0; }
    .search-input { flex:1; padding:10px; border-radius:6px; border:none; }
    .btn { padding:10px 20px; border:none; border-radius:6px; cursor:pointer; }
    .btn-primary { background:#4361ee; color:white; }
    .btn-secondary { background:#1e293b; color:white; }
    .file-list { display:grid; grid-template-columns:repeat(auto-fill,minmax(250px,1fr)); gap:15px; }
    .file-item { background:#1e293b; padding:15px; border-radius:8px; cursor:pointer; transition:.2s; }
    .file-item:hover { background:#334155; }
    pre { background:#0f172a; padding:15px; border-radius:8px; overflow-x:auto; }
    .hidden { display:none; }
  </style>
</head>
<body>
  <h1><i class="fas fa-folder-open"></i> File Explorer GitHub</h1>

  <div class="search-box">
    <input type="text" id="repo-url" class="search-input" placeholder="Masukkan URL repo GitHub (contoh: https://github.com/ndraawz/hub)">
  </div>
  <div class="search-box">
    <input type="text" id="search-input" class="search-input" placeholder="Cari nama file...">
    <button class="btn btn-primary" id="search-btn"><i class="fas fa-search"></i> Cari</button>
    <button class="btn btn-secondary" id="list-btn"><i class="fas fa-list"></i> Semua File</button>
  </div>

  <div id="files-section" class="hidden">
    <h2>Daftar File</h2>
    <div id="file-list" class="file-list"></div>
  </div>

  <div id="code-section" class="hidden">
    <h2 id="code-title"></h2>
    <button class="btn btn-secondary" id="back-btn"><i class="fas fa-arrow-left"></i> Kembali</button>
    <button class="btn btn-primary" id="copy-btn"><i class="fas fa-copy"></i> Salin</button>
    <pre><code id="code-content"></code></pre>
  </div>

  <script>
    const searchBtn = document.getElementById('search-btn');
    const listBtn = document.getElementById('list-btn');
    const backBtn = document.getElementById('back-btn');
    const copyBtn = document.getElementById('copy-btn');
    const searchInput = document.getElementById('search-input');
    const repoUrlInput = document.getElementById('repo-url');
    const fileList = document.getElementById('file-list');
    const filesSection = document.getElementById('files-section');
    const codeSection = document.getElementById('code-section');
    const codeTitle = document.getElementById('code-title');
    const codeContent = document.getElementById('code-content');

    const ACCESS_KEY = "ndraa123good"; // kunci akses

    function parseRepoUrl(url){
      const parts = url.replace("https://github.com/","").split("/");
      return { owner:parts[0], repo:parts[1] };
    }

    async function fetchRepoFiles(owner, repo){
      const res = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents`);
      if(!res.ok) throw new Error("Repo tidak ditemukan!");
      return await res.json();
    }

    async function searchFile(){
      const query = searchInput.value.trim().toLowerCase();
      if(!query) return alert("Masukkan nama file!");
      const {owner,repo} = parseRepoUrl(repoUrlInput.value);
      const files = await fetchRepoFiles(owner,repo);

      const found = files.find(f => f.name.toLowerCase() === query);
      if(found){
        const key = prompt("Masukkan kunci akses:");
        if(key===ACCESS_KEY){
          showFile(found);
        } else {
          alert("Kunci salah!");
        }
      } else {
        alert("File tidak ditemukan.");
      }
    }

    async function listAllFiles(){
      const {owner,repo} = parseRepoUrl(repoUrlInput.value);
      const key = prompt("Masukkan kunci akses:");
      if(key!==ACCESS_KEY) return alert("Kunci salah!");
      const files = await fetchRepoFiles(owner,repo);
      renderFileList(files);
    }

    async function showFile(file){
      const res = await fetch(file.download_url);
      const text = await res.text();
      codeTitle.textContent = file.name;
      codeContent.textContent = text;
      filesSection.classList.add("hidden");
      codeSection.classList.remove("hidden");
    }

    function renderFileList(files){
      fileList.innerHTML="";
      files.forEach(file=>{
        const div=document.createElement("div");
        div.className="file-item";
        div.textContent=file.name;
        div.onclick=()=>showFile(file);
        fileList.appendChild(div);
      });
      filesSection.classList.remove("hidden");
      codeSection.classList.add("hidden");
    }

    backBtn.onclick=()=>{
      codeSection.classList.add("hidden");
      filesSection.classList.remove("hidden");
    };

    copyBtn.onclick=()=>{
      navigator.clipboard.writeText(codeContent.textContent).then(()=>{
        alert("Kode disalin!");
      });
    };

    searchBtn.onclick=searchFile;
    listBtn.onclick=listAllFiles;
  </script>
</body>
</html>
